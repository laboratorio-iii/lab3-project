{"remainingRequest":"/home/hermesgabriel/workspace/lab3-project/node_modules/babel-loader/lib/index.js!/home/hermesgabriel/workspace/lab3-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/hermesgabriel/workspace/lab3-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hermesgabriel/workspace/lab3-project/src/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hermesgabriel/workspace/lab3-project/src/components/Profile.vue","mtime":1574647879664},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/cache-loader/dist/cjs.js","mtime":1573791216187},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/babel-loader/lib/index.js","mtime":1573791216119},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/cache-loader/dist/cjs.js","mtime":1573791216187},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/vue-loader/lib/index.js","mtime":1573791221627}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapMutations } from 'vuex';\nimport moment from 'moment';\nimport UserService from '@/services/UserService';\nimport StateService from '@/services/StateService';\nimport CityService from '@/services/CityService';\nimport FollowService from '@/services/FollowService';\nimport Publicaciones from './Publicaciones';\nimport Seguidores from './Seguidores';\nimport Seguidos from './Seguidos';\nexport default {\n  components: {\n    Publicaciones: Publicaciones,\n    Seguidores: Seguidores,\n    Seguidos: Seguidos\n  },\n  data: function data() {\n    return {\n      user_found: {\n        city: {\n          name: '',\n          state: {\n            name: ''\n          }\n        }\n      },\n      new_date: '',\n      tab: null,\n      dialog: false,\n      show: false,\n      date: new Date().toISOString().substr(0, 10),\n      menu: false,\n      rules: {\n        required: function required(value) {\n          return !!value || 'Requerido';\n        },\n        min: function min(v) {\n          return v.length >= 8 || 'Mínimo 8 caracteres';\n        }\n      },\n      items: ['Publicaciones', 'Seguidores', 'Seguidos'],\n      states: [],\n      cities: []\n    };\n  },\n  mounted: function mounted() {\n    this.onNavBtn(), this.getStates(), this.getUser(); // console.log(this.$route.params.user)\n  },\n  computed: _objectSpread({}, mapState(['color_base', 'user']), {\n    activeBtnValue: {\n      get: function get() {\n        return this.$store.state.activeBtn;\n      },\n      set: function set(val) {\n        this.setActiveBtn(val);\n      }\n    }\n  }),\n  methods: _objectSpread({}, mapMutations(['setActiveBtn']), {\n    onNavBtn: function onNavBtn() {\n      this.setActiveBtn();\n    },\n    getUser: function getUser() {\n      var _this = this;\n\n      UserService.getUser(this.$route.params.user).then(function (response) {\n        _this.user_found = response.data.user;\n        FollowService.getFollower(response.data.user._id).then(function (r) {\n          _this.user_found.followed = r.data.followed;\n        });\n      });\n    },\n    getStates: function getStates() {\n      var _this2 = this;\n\n      StateService.fetchStates().then(function (response) {\n        response.data.states.forEach(function (state, index) {\n          _this2.states.push(state.name);\n        });\n      });\n    },\n    getCities: function getCities(param) {\n      var _this3 = this;\n\n      this.cities = [];\n      CityService.fetchCitiesByState(param).then(function (response) {\n        if (_typeof(response.data.cities) === 'object') {\n          _this3.cities.push(response.data.cities.name);\n        } else {\n          response.data.cities.forEach(function (city, index) {\n            _this3.cities.push(city.name);\n          });\n        }\n      });\n    },\n    onPickFile: function onPickFile() {\n      this.$refs.fileInput.click();\n    },\n    follow: function follow(id) {\n      var _this4 = this;\n\n      FollowService.follow({\n        followed: id,\n        follower: this.$store.state.user._id\n      }).then(function (response) {\n        // console.log(response.data.result)\n        _this4.getUser();\n      });\n    },\n    resetUser: function resetUser() {\n      this.dialog = false;\n      this.getUser();\n    },\n    updateUser: function updateUser() {\n      var _this5 = this;\n\n      UserService.updateUser(this.user_found).then(function (response) {\n        _this5.dialog = false;\n\n        _this5.getUser();\n      });\n    }\n  })\n};",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-content>\n        <v-container grid-list-xs>\n            <v-card>\n                <v-layout row wrap>\n                    <v-flex xs4>\n                        <v-avatar\n                            class=\"mx-auto my-5 d-block grey lighten-2\"\n                            size=\"100\"\n                        >\n                            <img\n                            :src=\"user_found.image\"\n                            >\n                  \n                        </v-avatar>\n\n                        <input type=\"file\" style=\"display: none;\" ref=\"fileInput\">\n                    </v-flex>\n                    <v-divider vertical></v-divider>\n                    <v-flex xs7>\n                        <v-card-text class=\"text-xs-center\">\n                            <h4 class=\"text--primary font-weight-light\">\n                                {{ user_found.firstname +\" \"+ user_found.lastname }}\n                            </h4>\n                            \n                            <v-divider></v-divider>\n                            <h6 class=\"gray--text\">Se unió el  {{ user_found.createdAt | formatDate}}.</h6>\n                            <v-divider></v-divider>\n                            <p class=\"font-weight-light\">{{ user_found.city.name +\", \"+ user_found.city.state.name}}</p>\n                            \n                            <template v-if=\"user_found._id == user._id\">\n                                <v-btn fab dark x-small :color=\"color_base\" class=\"mx-2\"\n                                    @click=\"onPickFile\">\n                                        <v-icon dark>camera_alt</v-icon>\n                                </v-btn>\n                                <v-btn small color=\"gray\" class=\"mx-5\" @click=\"dialog = true\">\n                                        <v-icon dark>edit</v-icon>\n                                </v-btn>\n                            </template>\n\n                            <template v-else>\n                                <v-btn v-if=\"!user_found.followed\" x-small block class=\"font-weight-light\" @click=\"follow(user_found._id)\">\n                                    <v-icon dark left>done</v-icon>Seguir\n                                </v-btn>\n\n                                <v-btn v-else x-small block class=\"font-weight-light white--text\" :color=\"color_base\" @click=\"follow(user_found._id)\">\n                                    <v-icon dark left>done</v-icon>Seguido\n                                </v-btn>\n\n                            </template>\n\n                        </v-card-text>\n                    </v-flex>  \n                </v-layout>\n            </v-card>\n\n            <v-tabs\n                v-model=\"tab\"\n                background-color=\"transparent\"\n                :color=\"color_base\"\n                grow\n                class=\"mb-1\"\n                >\n                <v-tab\n                    v-for=\"item in items\"\n                    :key=\"item\"\n                    v-text=\"item\"\n                >\n                </v-tab>\n            </v-tabs>\n\n            <v-tabs-items v-model=\"tab\">\n                <v-tab-item\n                    v-for=\"item in items\"\n                    :key=\"item\"\n                >\n                    <component :is=\"item\"></component>\n                    \n                </v-tab-item>\n            </v-tabs-items>\n            <template id=\"dialog\">\n                <v-layout justify-center>\n                    <v-dialog v-model=\"dialog\" max-width=\"600px\" @click:outside=\"getUser\">\n                    \n                    <v-card>\n                        <v-card-title>\n                        <span class=\"headline\">Datos personales</span>\n                        </v-card-title>\n                        <v-card-text>\n                        <v-container grid-list-md>\n                            <v-form>\n                                <v-layout row wrap>\n                                    <v-flex xs6>\n                                        <v-text-field :color=\"color_base\"\n                                            name=\"nombre\"\n                                            label=\"Nombre\"\n                                            id=\"nombre\"\n                                            v-model=\"user_found.firstname\"\n                                        ></v-text-field>\n                                    </v-flex>\n\n                                    <v-flex xs6>\n                                        <v-text-field :color=\"color_base\"\n                                            name=\"apellido\"\n                                            label=\"Apellidos\"\n                                            id=\"apellido\"\n                                            v-model=\"user_found.lastname\"\n                                        ></v-text-field>\n                                    </v-flex>\n\n                                    <!-- <v-flex>\n                                        <v-menu\n                                            v-model=\"menu\"\n                                            :close-on-content-click=\"false\"\n                                            :nudge-right=\"40\"\n                                            transition=\"scale-transition\"\n                                            offset-y\n                                            full-width\n                                            min-width=\"290px\"\n                                        >\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-text-field :color=\"color_base\"\n                                                    v-model=\"new_date\"\n                                                    label=\"Fecha de nacimiento\"\n                                                    prepend-icon=\"event\"\n                                                    readonly\n                                                    v-on=\"on\"\n                                                ></v-text-field>\n                                            </template>\n                                            <v-date-picker :color=\"color_base\" v-model=\"new_date\" @input=\"menu = false\"></v-date-picker>\n                                        </v-menu>\n                                    </v-flex> -->\n\n                                    <!-- <v-flex xs12 sm6 d-flex>\n                                        <v-select :color=\"color_base\"\n                                        v-model=\"user_found.city.state.name\"\n                                        :items=\"states\"\n                                        menu-props=\"auto\"\n                                        label=\"Estado\"\n                                        @change=\"getCities(user_found.city.state.name)\"\n                                        ></v-select>\n                                    </v-flex>\n\n                                    <v-flex xs12 sm6 d-flex>\n                                        <v-select :color=\"color_base\"\n                                        v-model=\"user_found.city.name\"\n                                        :items=\"cities\"\n                                        menu-props=\"auto\"\n                                        label=\"Ciudad\"\n                                        ></v-select>\n                                    </v-flex> -->\n                                    \n                                </v-layout>\n                            </v-form>\n                        </v-container>\n                        </v-card-text>\n                        <v-card-actions>\n                        <v-spacer></v-spacer>\n                        <v-btn :color=\"color_base\" text @click=\"resetUser\">Salir</v-btn>\n                        <v-btn :color=\"color_base\" text @click=\"updateUser\">Guardar datos</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                    </v-dialog>\n                </v-layout>\n            </template>\n        </v-container>\n    </v-content>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\nimport moment from 'moment'\nimport UserService from '@/services/UserService'\nimport StateService from '@/services/StateService'\nimport CityService from '@/services/CityService'\nimport FollowService from '@/services/FollowService'\n\nimport Publicaciones from './Publicaciones'\nimport Seguidores from './Seguidores'\nimport Seguidos from './Seguidos'\n\nexport default {\n    components: {\n        Publicaciones,\n        Seguidores,\n        Seguidos,\n    },\n    data: () => ({\n        user_found: {\n            city: {\n                name: '',\n                state: {\n                    name: ''\n                }\n            }\n        },\n        new_date: '',\n        tab: null,\n        dialog: false,\n        show: false,\n        date: new Date().toISOString().substr(0, 10),\n        menu: false,\n        rules: {\n            required: value => !!value || 'Requerido',\n            min: v => v.length >= 8 || 'Mínimo 8 caracteres',\n        },\n        items: [\n            'Publicaciones', 'Seguidores', 'Seguidos',\n        ],\n        states: [],\n        cities: []\n    }),\n    mounted() {\n        this.onNavBtn(),\n        this.getStates(),\n        this.getUser()\n        // console.log(this.$route.params.user)\n    },\n    computed: {\n        ...mapState(['color_base', 'user']),\n        activeBtnValue: {\n            get () {\n                return this.$store.state.activeBtn\n            },\n            set (val) {\n                this.setActiveBtn(val)\n            }\n        }, \n    },\n    methods: {\n        ...mapMutations(['setActiveBtn']),\n        onNavBtn () {\n            this.setActiveBtn()\n        },\n        getUser(){\n            UserService.getUser(this.$route.params.user).then(response => {\n                this.user_found = response.data.user\n                FollowService.getFollower(response.data.user._id).then(r => {\n                    this.user_found.followed = r.data.followed\n                })\n            })\n        },\n        getStates () {\n            StateService.fetchStates().then(response=>{\n                response.data.states.forEach((state, index) => {\n                    this.states.push(state.name)\n                })\n            })\n        },\n        getCities (param) {\n            this.cities = []\n            CityService.fetchCitiesByState(param).then(response=>{\n                if(typeof response.data.cities === 'object'){\n                    this.cities.push(response.data.cities.name)\n                } else{\n                    response.data.cities.forEach((city, index) => {\n                        this.cities.push(city.name)\n                    })\n                }\n            })\n        },\n        onPickFile() {\n            this.$refs.fileInput.click()\n        },\n        follow(id) {\n            FollowService.follow({followed: id, follower: this.$store.state.user._id}).then(response => {\n                // console.log(response.data.result)\n                this.getUser()\n            })\n        },\n        resetUser() {\n            this.dialog = false\n            this.getUser()\n        },\n        updateUser() {\n            UserService.updateUser(this.user_found).then(response => {\n                this.dialog = false\n                this.getUser()\n            })\n        }\n    },\n}\n</script>"],"sourceRoot":"src/components"}]}