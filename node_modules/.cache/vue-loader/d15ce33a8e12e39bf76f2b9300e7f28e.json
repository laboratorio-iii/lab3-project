{"remainingRequest":"/home/hermesgabriel/workspace/lab3-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hermesgabriel/workspace/lab3-project/src/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hermesgabriel/workspace/lab3-project/src/components/Profile.vue","mtime":1574641664827},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/cache-loader/dist/cjs.js","mtime":1573791216187},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/babel-loader/lib/index.js","mtime":1573791216119},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/cache-loader/dist/cjs.js","mtime":1573791216187},{"path":"/home/hermesgabriel/workspace/lab3-project/node_modules/vue-loader/lib/index.js","mtime":1573791221627}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex'\nimport moment from 'moment'\nimport UserService from '@/services/UserService'\nimport StateService from '@/services/StateService'\nimport CityService from '@/services/CityService'\nimport FollowService from '@/services/FollowService'\n\nimport Publicaciones from './Publicaciones'\nimport Seguidores from './Seguidores'\nimport Seguidos from './Seguidos'\n\nexport default {\n    components: {\n        Publicaciones,\n        Seguidores,\n        Seguidos,\n    },\n    data: () => ({\n        user_found: {\n            city: {\n                name: '',\n                state: {\n                    name: ''\n                }\n            }\n        },\n        new_date: '',\n        tab: null,\n        dialog: false,\n        show: false,\n        date: new Date().toISOString().substr(0, 10),\n        menu: false,\n        rules: {\n            required: value => !!value || 'Requerido',\n            min: v => v.length >= 8 || 'Mínimo 8 caracteres',\n        },\n        items: [\n            'Publicaciones', 'Seguidores', 'Seguidos',\n        ],\n        states: [],\n        cities: []\n    }),\n    mounted() {\n        this.onNavBtn(),\n        this.getStates(),\n        this.getUser()\n        // console.log(this.$route.params.user)\n    },\n    computed: {\n        ...mapState(['color_base', 'user']),\n        activeBtnValue: {\n            get () {\n                return this.$store.state.activeBtn\n            },\n            set (val) {\n                this.setActiveBtn(val)\n            }\n        }, \n    },\n    methods: {\n        ...mapMutations(['setActiveBtn']),\n        onNavBtn () {\n            this.setActiveBtn()\n        },\n        dateFormat(date) {\n            return moment(data).format('YYYY-MM-DD')\n        },\n        getUser(){\n            UserService.getUser(this.$route.params.user).then(response => {\n                this.user_found = response.data.user\n                this.new_date = dateFormat(response.data.user.birthdate)\n                console.log(this.new_date)\n                FollowService.getFollower(response.data.user._id).then(r => {\n                    this.user_found.followed = r.data.followed\n                })\n            })\n        },\n        getStates () {\n            StateService.fetchStates().then(response=>{\n                response.data.states.forEach((state, index) => {\n                    this.states.push(state.name)\n                })\n            })\n        },\n        getCities (param) {\n            this.cities = []\n            CityService.fetchCitiesByState(param).then(response=>{\n                if(typeof response.data.cities === 'object'){\n                    this.cities.push(response.data.cities.name)\n                } else{\n                    response.data.cities.forEach((city, index) => {\n                        this.cities.push(city.name)\n                    })\n                }\n            })\n        },\n        onPickFile() {\n            this.$refs.fileInput.click()\n        },\n        follow(id) {\n            FollowService.follow({followed: id, follower: this.$store.state.user._id}).then(response => {\n                // console.log(response.data.result)\n                this.getUser()\n            })\n        },\n        resetUser() {\n            this.dialog = false\n            this.getUser()\n        },\n        updateUser() {\n            UserService.updateUser(this.user_found).then(response => {\n                this.dialog = false\n                this.getUser()\n            })\n        }\n    },\n}\n",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-content>\n        <v-container grid-list-xs>\n            <v-card>\n                <v-layout row wrap>\n                    <v-flex xs4>\n                        <v-avatar\n                            class=\"mx-auto my-5 d-block grey lighten-2\"\n                            size=\"100\"\n                        >\n                            <img\n                            :src=\"user_found.image\"\n                            >\n                  \n                        </v-avatar>\n\n                        <input type=\"file\" style=\"display: none;\" ref=\"fileInput\">\n                    </v-flex>\n                    <v-divider vertical></v-divider>\n                    <v-flex xs7>\n                        <v-card-text class=\"text-xs-center\">\n                            <h4 class=\"text--primary font-weight-light\">\n                                {{ user_found.firstname +\" \"+ user_found.lastname }}\n                            </h4>\n                            \n                            <v-divider></v-divider>\n                            <h6 class=\"gray--text\">Se unió el  {{ user_found.createdAt | formatDate}}.</h6>\n                            <v-divider></v-divider>\n                            <p class=\"font-weight-light\">{{ user_found.city.name +\", \"+ user_found.city.state.name}}</p>\n                            \n                            <template v-if=\"user_found._id == user._id\">\n                                <v-btn fab dark x-small :color=\"color_base\" class=\"mx-2\"\n                                    @click=\"onPickFile\">\n                                        <v-icon dark>camera_alt</v-icon>\n                                </v-btn>\n                                <v-btn small color=\"gray\" class=\"mx-5\" @click=\"dialog = true\">\n                                        <v-icon dark>edit</v-icon>\n                                </v-btn>\n                            </template>\n\n                            <template v-else>\n                                <v-btn v-if=\"!user_found.followed\" x-small block class=\"font-weight-light\" @click=\"follow(user_found._id)\">\n                                    <v-icon dark left>done</v-icon>Seguir\n                                </v-btn>\n\n                                <v-btn v-else x-small block class=\"font-weight-light white--text\" :color=\"color_base\" @click=\"follow(user_found._id)\">\n                                    <v-icon dark left>done</v-icon>Seguido\n                                </v-btn>\n\n                            </template>\n\n                        </v-card-text>\n                    </v-flex>  \n                </v-layout>\n            </v-card>\n\n            <v-tabs\n                v-model=\"tab\"\n                background-color=\"transparent\"\n                :color=\"color_base\"\n                grow\n                class=\"mb-1\"\n                >\n                <v-tab\n                    v-for=\"item in items\"\n                    :key=\"item\"\n                    v-text=\"item\"\n                >\n                </v-tab>\n            </v-tabs>\n\n            <v-tabs-items v-model=\"tab\">\n                <v-tab-item\n                    v-for=\"item in items\"\n                    :key=\"item\"\n                >\n                    <component :is=\"item\"></component>\n                    \n                </v-tab-item>\n            </v-tabs-items>\n            <template id=\"dialog\">\n                <v-layout justify-center>\n                    <v-dialog v-model=\"dialog\" max-width=\"600px\" @click:outside=\"getUser\">\n                    \n                    <v-card>\n                        <v-card-title>\n                        <span class=\"headline\">Datos personales</span>\n                        </v-card-title>\n                        <v-card-text>\n                        <v-container grid-list-md>\n                            <v-form>\n                                <v-layout row wrap>\n                                    <v-flex xs6>\n                                        <v-text-field :color=\"color_base\"\n                                            name=\"nombre\"\n                                            label=\"Nombre\"\n                                            id=\"nombre\"\n                                            v-model=\"user_found.firstname\"\n                                        ></v-text-field>\n                                    </v-flex>\n\n                                    <v-flex xs6>\n                                        <v-text-field :color=\"color_base\"\n                                            name=\"apellido\"\n                                            label=\"Apellidos\"\n                                            id=\"apellido\"\n                                            v-model=\"user_found.lastname\"\n                                        ></v-text-field>\n                                    </v-flex>\n\n                                    <v-flex>\n                                        <v-menu\n                                            v-model=\"menu\"\n                                            :close-on-content-click=\"false\"\n                                            :nudge-right=\"40\"\n                                            transition=\"scale-transition\"\n                                            offset-y\n                                            full-width\n                                            min-width=\"290px\"\n                                        >\n                                            <template v-slot:activator=\"{ on }\">\n                                                <v-text-field :color=\"color_base\"\n                                                    v-model=\"new_date\"\n                                                    label=\"Fecha de nacimiento\"\n                                                    prepend-icon=\"event\"\n                                                    readonly\n                                                    v-on=\"on\"\n                                                ></v-text-field>\n                                            </template>\n                                            <v-date-picker :color=\"color_base\" v-model=\"date\" @input=\"menu = false\"></v-date-picker>\n                                        </v-menu>\n                                    </v-flex>\n\n                                    <!-- <v-flex xs12 sm6 d-flex>\n                                        <v-select :color=\"color_base\"\n                                        v-model=\"user_found.city.state.name\"\n                                        :items=\"states\"\n                                        menu-props=\"auto\"\n                                        label=\"Estado\"\n                                        @change=\"getCities(user_found.city.state.name)\"\n                                        ></v-select>\n                                    </v-flex>\n\n                                    <v-flex xs12 sm6 d-flex>\n                                        <v-select :color=\"color_base\"\n                                        v-model=\"user_found.city.name\"\n                                        :items=\"cities\"\n                                        menu-props=\"auto\"\n                                        label=\"Ciudad\"\n                                        ></v-select>\n                                    </v-flex> -->\n                                    \n                                </v-layout>\n                            </v-form>\n                        </v-container>\n                        </v-card-text>\n                        <v-card-actions>\n                        <v-spacer></v-spacer>\n                        <v-btn :color=\"color_base\" text @click=\"resetUser\">Salir</v-btn>\n                        <v-btn :color=\"color_base\" text @click=\"updateUser\">Guardar datos</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                    </v-dialog>\n                </v-layout>\n            </template>\n        </v-container>\n    </v-content>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\nimport moment from 'moment'\nimport UserService from '@/services/UserService'\nimport StateService from '@/services/StateService'\nimport CityService from '@/services/CityService'\nimport FollowService from '@/services/FollowService'\n\nimport Publicaciones from './Publicaciones'\nimport Seguidores from './Seguidores'\nimport Seguidos from './Seguidos'\n\nexport default {\n    components: {\n        Publicaciones,\n        Seguidores,\n        Seguidos,\n    },\n    data: () => ({\n        user_found: {\n            city: {\n                name: '',\n                state: {\n                    name: ''\n                }\n            }\n        },\n        new_date: '',\n        tab: null,\n        dialog: false,\n        show: false,\n        date: new Date().toISOString().substr(0, 10),\n        menu: false,\n        rules: {\n            required: value => !!value || 'Requerido',\n            min: v => v.length >= 8 || 'Mínimo 8 caracteres',\n        },\n        items: [\n            'Publicaciones', 'Seguidores', 'Seguidos',\n        ],\n        states: [],\n        cities: []\n    }),\n    mounted() {\n        this.onNavBtn(),\n        this.getStates(),\n        this.getUser()\n        // console.log(this.$route.params.user)\n    },\n    computed: {\n        ...mapState(['color_base', 'user']),\n        activeBtnValue: {\n            get () {\n                return this.$store.state.activeBtn\n            },\n            set (val) {\n                this.setActiveBtn(val)\n            }\n        }, \n    },\n    methods: {\n        ...mapMutations(['setActiveBtn']),\n        onNavBtn () {\n            this.setActiveBtn()\n        },\n        dateFormat(date) {\n            return moment(data).format('YYYY-MM-DD')\n        },\n        getUser(){\n            UserService.getUser(this.$route.params.user).then(response => {\n                this.user_found = response.data.user\n                this.new_date = dateFormat(response.data.user.birthdate)\n                console.log(this.new_date)\n                FollowService.getFollower(response.data.user._id).then(r => {\n                    this.user_found.followed = r.data.followed\n                })\n            })\n        },\n        getStates () {\n            StateService.fetchStates().then(response=>{\n                response.data.states.forEach((state, index) => {\n                    this.states.push(state.name)\n                })\n            })\n        },\n        getCities (param) {\n            this.cities = []\n            CityService.fetchCitiesByState(param).then(response=>{\n                if(typeof response.data.cities === 'object'){\n                    this.cities.push(response.data.cities.name)\n                } else{\n                    response.data.cities.forEach((city, index) => {\n                        this.cities.push(city.name)\n                    })\n                }\n            })\n        },\n        onPickFile() {\n            this.$refs.fileInput.click()\n        },\n        follow(id) {\n            FollowService.follow({followed: id, follower: this.$store.state.user._id}).then(response => {\n                // console.log(response.data.result)\n                this.getUser()\n            })\n        },\n        resetUser() {\n            this.dialog = false\n            this.getUser()\n        },\n        updateUser() {\n            UserService.updateUser(this.user_found).then(response => {\n                this.dialog = false\n                this.getUser()\n            })\n        }\n    },\n}\n</script>"]}]}